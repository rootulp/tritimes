# TriTimes

TriTimes lets athletes see their historical IronMan and IronMan 70.3 results. For an individual result, it presents distributions for each discipline (swim, bike, run) and a combined distribution for their total time. The distributions show how an athlete performed relative to their age group and overall.

TriTimes collects data from <https://www.ironman.com/races/im703-new-york/results>.

## Inspiration

<https://www.hyresult.com/>

## Data Strategy

- **CSVs** (`data/*.csv`) are committed to git — compact (~400 KB per race)
- **Raw JSON** (`data/raw/`) is gitignored — too large for git (~10 MB per race)
- **Race manifest** (`data/races.json`) tracks all available races and is auto-generated by the scraper

## Adding New Races

1. Add the race to `scripts/race-registry.json` with its group URL from `labs-v2.competitor.com`
2. Run discovery to find event IDs:
   ```
   node scripts/discover.js <ironman-results-url-or-group-url>
   ```
3. Scrape results:
   ```
   node scripts/scrape-all.js --slug=<race-slug> --year=2025
   ```
   Or scrape a single race directly:
   ```
   node scripts/scrape.js <slug> <event-id> --no-raw
   ```
4. The app reads from `data/races.json` — no code changes needed

## Data Pipeline

```
ironman.com results page
  → discover.js extracts group UUID → fetches subevent IDs
  → scrape.js fetches API results → raw JSON → CSV
  → scrape-all.js generates data/races.json manifest
  → Next.js app reads races.json + CSVs at build time
```

## Local Development

Prerequisites: [Node.js](https://nodejs.org/) 18+

```bash
cd app
npm install
npm run dev
```

| Command | Description |
|---------|-------------|
| `npm run dev` | Start Next.js development server |
| `npm run build` | Build for production (also generates search index) |
| `npm run start` | Start production server |
| `npm run lint` | Run ESLint |
